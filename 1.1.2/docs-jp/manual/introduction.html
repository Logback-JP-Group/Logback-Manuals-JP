<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>1: はじめてのlogback</title>
    <link rel="stylesheet" type="text/css" href="../css/common.css" />
    <link rel="stylesheet" type="text/css" href="../css/screen.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="../css/_print.css" media="print" />
    <link rel="stylesheet" type="text/css" href="../css/prettify.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="../css/SyntaxHighlighter/shCore.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="../css/SyntaxHighlighter/shThemeRDark.css" media="screen" />

  </head>
  <body onload="prettyPrint(); decorate();">
    <script type="text/javascript">prefix='../';</script>
    <script type="text/javascript" src="../js/prettify.js"></script>
    <script src="../templates/header.js" type="text/javascript"> </script>
    <script type="text/javascript" src="../js/jquery-min.js"></script>
    <script type="text/javascript" src="../js/decorator.js"></script>
    <div id="left">
      <noscript>Please turn on Javascript to view this menu</noscript>
      <script src="../templates/left.js" type="text/javascript"></script>
    </div>
    <div id="right">
      <script src="menu.js" type="text/javascript"></script>
    </div>
    <div id="content">

    <h1>1: はじめてのlogback</h1>

    <div class="quote">
      <p><em> The morale effects are startling. Enthusiasm jumps when
      there is a running system, even a simple one. Efforts redouble when
      the first picture from a new graphics software system appears on the
      screen, even if it is only a rectangle. One always has, at every
      stage in the process, a working system. I find that teams can grow
      much more complex entities in four months than they can
      build.</em></p>
      
      <p>&mdash;FREDERICK P. BROOKS, JR., <em>The Mythical Man-Month</em></p>
    </div>


    <script src="../templates/creative.js" type="text/javascript"></script>

    <h2>logbackとはなんでしょう？</h2>

    <p>Logbackは有名な<a href="reasonsToSwitch.html">log4jの後を受けて</a>作られた後継プロジェクトの１つです。
    それは、10年の非常に強力なロギングシステムの設計で培われた経験の上に成り立っています。
    そこから得られた成果物であるlogbackは既存の全てのロギングシステムよりも高速です。
    機能によっては大きな差が出ています。
    特徴的な点では、logbackのみに存在する<a
    href="../reasonsToSwitch.html">ユニークな機能や、他のロギングシステムには無い便利な機能</a>も提供しています。
    </p>

    <h2>最初のステップ</h2>

    <script src="../templates/setup.js" type="text/javascript"></script>
    
    <a name="Requirements"></a>
    <h3>最低限必要なもの</h3>

    <p>Logback-classicモジュールを利用するためには<em>logback-classic.jar</em>だけでなく
    <em>slf4j-api.jar</em>と<em>logback-core.jar</em>をクラスパスに追加する必要があります。
    </p>

    <p><em>logback-*.jar</em>ファイルはlogbackのディストリビューションの一つですが、
    その一方で<em>slf4j-api-1.7.6.jar</em>はSLF4に則った分割プロジェクトです。
    </p>

    <p>早速logbackを試してみましょう。</p>

<em>例 1.1: ロギング基本テンプレート (<a href="../xref/chapters/introduction/HelloWorld1.html">logback-examples/src/main/java/chapters/introduction/HelloWorld1.java</a>)</em>
<pre class="brush:java collapse:true highlight:[3,4,11,12]" title="例 1.1: サンプルソース">package chapters.introduction;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;


public class HelloWorld1 {

  public static void main(String[] args) {

    Logger logger = LoggerFactory.getLogger("chapters.introduction.HelloWorld1");
    logger.debug("Hello world.");

  }
}</pre>

    <p><code>HelloWorld1</code>クラスは<code>chapters.introduction</code>パッケージで定義されています。
    特に<code>org.slf4j</code> パッケージ内、SLF4J APIで定義された<a
    href="http://slf4j.org/api/org/slf4j/Logger.html"><code>Logger</code></a
    >と、<a
    href="http://slf4j.org/api/org/slf4j/LoggerFactory.html"><code>LoggerFactory</code></a
    >クラスをインポートすることで、logbackを使用可能な状態にします。
    </p>

    <p>main()メソッドの最初の行では、<code>LoggerFactory</code>クラスの<code
    >getLogger</code>スタティックメソッドを利用して
    <code>logger</code>変数に<code>Logger</code>インスタンスが代入されています。
    このloggerは"chapters.introduction.HelloWorld1"と名付けられました。
    mainメソッドが第一引数"Hello World"文字列を持つこのloggerインスタンスの<code>debug</code>メソッドを実行します。
    私達はmainメソッドの内容DBUGレベルの"Hello world"を持つloggingステートメントと言います。</p>

    <p>上記はlogbackクラス使用方法のほんの１例です。
    ほぼ全てのケースで、ロギングを使う唯一のルールは、あなたのクラスにSLF4Jクラスをインポートすることだけです。
    このように、大多数が、logbackの存在に気付れないままSLF4J APIを使用しています。</p>


    <p>最初の起動You can launch the first
    sample application, <em>chapters.introduction.HelloWorld1</em> with the command:
    </p>
    <div class="source"><pre>java chapters.introduction.HelloWorld1</pre></div>

    <p>Launching the <code>HelloWorld1</code> application will output
    a single line on the console. By virtue of logback's default
    configuration policy, when no default configuration file is found,
    logback will add a <code>ConsoleAppender</code> to the root
    logger.
    </p>

    <p class="source">20:49:07.962 [main] DEBUG chapters.introduction.HelloWorld1 - Hello world.</p>

    <p>Logback can report information about its internal state using a
    built-in status system. Important events occurring during logback's
    lifetime can be accessed through a component called
    <code>StatusManager</code>. For the time being, let us instruct
    logback to print its internal state by invoking the static
    <code>print()</code> method of the <code>StatusPrinter</code>
    class.
    </p>

<em>Example: Printing Logger Status (<a href="../xref/chapters/introduction/HelloWorld2.html">logback-examples/src/main/java/chapters/introduction/HelloWorld2.java</a>)</em>
<pre class="brush:java collapse:true highlight:[5,6,15,16]" title="Loggerステータスを表示する例">package chapters.introduction;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import ch.qos.logback.classic.LoggerContext;
import ch.qos.logback.core.util.StatusPrinter;

public class HelloWorld2 {

  public static void main(String[] args) {
    Logger logger = LoggerFactory.getLogger("chapters.introduction.HelloWorld2");
    logger.debug("Hello world.");

    // 内部状態の表示
    LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();
    StatusPrinter.print(lc);
  }
}</pre>


   <p>Running the <code>HelloWorld2</code> application will produce
   the following output:</p>

<div class="source longline"><pre>12:49:22.203 [main] DEBUG chapters.introduction.HelloWorld2 - Hello world.
12:49:22,076 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
12:49:22,078 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
12:49:22,093 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.xml]
12:49:22,093 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Setting up default configuration.
</pre></div>


  <p>Logback explains that having failed to find the
  <em>logback-test.xml</em> and <em>logback.xml</em> configuration
  files (discussed later), it configured itself using its default
  policy, which is a basic <code>ConsoleAppender</code>.  An
  <code>Appender</code> is a class that can be seen as an output
  destination. Appenders exist for many different destinations
  including the console, files, Syslog, TCP Sockets, JMS and many
  more. Users can also easily create their own Appenders as
  appropriate for their specific situation.
  </p>

  <p>Note that in case of errors, logback will automatically print its
  internal state on the console.</p>

  <p>The previous examples are rather simple. Actual logging in a
  larger application would not be that different. The general pattern
  for logging statements would not change. Only the configuration
  process would be different. However, you would probably want to
  customize or configure logback according to your needs. Logback
  configuration will be covered in subsequent chapters.
  </p>

  <p>Note that in the above example we have instructed logback to
  print its internal state by invoking the
  <code>StatusPrinter.print()</code> method. Logback's internal status
  information can be very useful in diagnosing logback-related
  problems.
  </p>

  <p>Here is a list of the three required steps in order to enable
  logging in your application.
  </p>

  <ol> 
    <li>Configure the logback environment. You can do so in several
    more or less sophisticated ways. More on this later.</li>

    <li>In every class where you wish to perform logging, retrieve a
    <code>Logger</code> instance by invoking the
    <code>org.slf4j.LoggerFactory</code> class'
    <code>getLogger()</code> method, passing the current class name
    or the class itself as a parameter.</li>
    
    <li>Use this logger instance by invoking its printing methods,
    namely the debug(), info(), warn() and error() methods. This will
    produce logging output on the configured appenders.</li>
  </ol>
 
  
  <h2 class="doAnchor" name="building">Building logback</h2>
  
  <p>As its build tool, logback relies on <a
  href="http://maven.apache.org">Maven</a>, a widely-used open-source
  build tool.
  </p>

  <p>Once you have installed Maven, building the logback project,
  including all its modules, should be as easy as issuing a <code>mvn
  install</code> command from within the directory where you
  unarchived the logback distribution. Maven will automatically
  download the required external libraries.
  </p>

  <p>Logback distributions contain complete source code such that you
  can modify parts of logback library and build your own version of
  it. You may even redistribute the modified version, as long as you
  adhere to the conditions of the LGPL license or the EPL license.
  </p>

  <p>For building logback under an IDE, please see the <a
  href="../setup.html#ide">relevant section on the class path setup
  page</a>.</p>
  
  <script src="../templates/footer.js" type="text/javascript"></script>
  <!--  -->
  <script type="text/javascript" src="../js/SyntaxHighlighter/shCore.js"></script>
  <script type="text/javascript" src="../js/SyntaxHighlighter/shBrushJava.js"></script>
  <script type="text/javascript" src="../js/SyntaxHighlighter/shBrushXml.js"></script>
  <script type="text/javascript" src="../js/SyntaxHighlighter/shBrushCss.js"></script>
  <script type="text/javascript" src="../js/SyntaxHighlighter/shBrushJScript.js"></script>
  <script>SyntaxHighlighter.all();</script>
</div>
</body>
</html>
